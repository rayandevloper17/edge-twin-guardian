import { PhysicalDevice, DigitalTwin, Alert, SystemMetrics } from '@/types/dashboard';

// Military/Critical Infrastructure Devices
export const militaryDevices: PhysicalDevice[] = [
  {
    id: 'dev-001',
    name: 'Perimeter Sensor Alpha',
    type: 'Motion Sensor',
    manufacturer: 'DefenseTech',
    model: 'PT-500X',
    firmwareVersion: '3.2.1',
    osVersion: 'RTOS 2.0',
    location: 'North Gate - Sector A',
    owner: 'Base Security Command',
    networkType: 'LoRaWAN',
    ipAddress: '10.0.1.101',
    macAddress: 'AA:BB:CC:DD:EE:01',
    status: 'online',
    signalStrength: 92,
    latency: 12,
    lastHeartbeat: new Date(),
    position: { x: 150, y: 100 },
    connections: ['dev-002', 'dev-003'],
  },
  {
    id: 'dev-002',
    name: 'Surveillance Drone Hub',
    type: 'Drone Controller',
    manufacturer: 'AeroGuard',
    model: 'DH-2000',
    firmwareVersion: '5.1.0',
    osVersion: 'Linux 5.4',
    location: 'Command Center',
    owner: 'Air Defense Unit',
    networkType: '5G Private',
    ipAddress: '10.0.1.102',
    macAddress: 'AA:BB:CC:DD:EE:02',
    status: 'online',
    signalStrength: 98,
    latency: 5,
    lastHeartbeat: new Date(),
    position: { x: 350, y: 80 },
    connections: ['dev-001', 'dev-004', 'dev-005'],
  },
  {
    id: 'dev-003',
    name: 'Access Control Gateway',
    type: 'Biometric Scanner',
    manufacturer: 'SecureID',
    model: 'ACG-300',
    firmwareVersion: '2.8.4',
    osVersion: 'Embedded Linux',
    location: 'Main Entrance',
    owner: 'Security Division',
    networkType: 'Ethernet',
    ipAddress: '10.0.1.103',
    macAddress: 'AA:BB:CC:DD:EE:03',
    status: 'attack',
    signalStrength: 100,
    latency: 3,
    lastHeartbeat: new Date(),
    position: { x: 100, y: 280 },
    connections: ['dev-001', 'dev-006'],
  },
  {
    id: 'dev-004',
    name: 'Radar Station Beta',
    type: 'Radar System',
    manufacturer: 'RadarTech',
    model: 'RS-1000',
    firmwareVersion: '4.0.2',
    osVersion: 'VxWorks 7',
    location: 'Tower B',
    owner: 'Air Surveillance',
    networkType: 'Fiber Optic',
    ipAddress: '10.0.1.104',
    macAddress: 'AA:BB:CC:DD:EE:04',
    status: 'online',
    signalStrength: 95,
    latency: 8,
    lastHeartbeat: new Date(),
    position: { x: 500, y: 150 },
    connections: ['dev-002', 'dev-005'],
  },
  {
    id: 'dev-005',
    name: 'Communication Relay',
    type: 'Radio Gateway',
    manufacturer: 'CommLink',
    model: 'CR-750',
    firmwareVersion: '1.9.8',
    osVersion: 'RTOS 3.1',
    location: 'Tower A',
    owner: 'Communications',
    networkType: 'Satellite',
    ipAddress: '10.0.1.105',
    macAddress: 'AA:BB:CC:DD:EE:05',
    status: 'warning',
    signalStrength: 78,
    latency: 45,
    lastHeartbeat: new Date(Date.now() - 30000),
    position: { x: 450, y: 300 },
    connections: ['dev-002', 'dev-004', 'dev-006'],
  },
  {
    id: 'dev-006',
    name: 'Power Grid Monitor',
    type: 'SCADA Controller',
    manufacturer: 'GridSafe',
    model: 'PGM-400',
    firmwareVersion: '2.5.0',
    osVersion: 'QNX 7.1',
    location: 'Substation Alpha',
    owner: 'Infrastructure',
    networkType: 'Industrial Ethernet',
    ipAddress: '10.0.1.106',
    macAddress: 'AA:BB:CC:DD:EE:06',
    status: 'online',
    signalStrength: 88,
    latency: 15,
    lastHeartbeat: new Date(),
    position: { x: 280, y: 350 },
    connections: ['dev-003', 'dev-005'],
  },
];

// Smart City Devices
export const smartCityDevices: PhysicalDevice[] = [
  {
    id: 'sc-001',
    name: 'Traffic Light Controller',
    type: 'Traffic System',
    manufacturer: 'UrbanFlow',
    model: 'TLC-200',
    firmwareVersion: '3.0.1',
    osVersion: 'Linux 4.19',
    location: 'Intersection A1',
    owner: 'City Transport Dept',
    networkType: 'LTE-M',
    ipAddress: '192.168.1.101',
    macAddress: 'CC:DD:EE:FF:00:01',
    status: 'online',
    signalStrength: 90,
    latency: 20,
    lastHeartbeat: new Date(),
    position: { x: 200, y: 120 },
    connections: ['sc-002', 'sc-003'],
  },
  {
    id: 'sc-002',
    name: 'Air Quality Monitor',
    type: 'Environmental Sensor',
    manufacturer: 'CleanAir',
    model: 'AQM-50',
    firmwareVersion: '2.1.0',
    osVersion: 'FreeRTOS',
    location: 'Central Park',
    owner: 'Environmental Agency',
    networkType: 'NB-IoT',
    ipAddress: '192.168.1.102',
    macAddress: 'CC:DD:EE:FF:00:02',
    status: 'online',
    signalStrength: 85,
    latency: 100,
    lastHeartbeat: new Date(),
    position: { x: 380, y: 80 },
    connections: ['sc-001', 'sc-004'],
  },
  {
    id: 'sc-003',
    name: 'Smart Parking Sensor',
    type: 'Occupancy Sensor',
    manufacturer: 'ParkSmart',
    model: 'PS-100',
    firmwareVersion: '1.5.2',
    osVersion: 'Zephyr',
    location: 'Lot B Zone 3',
    owner: 'Parking Authority',
    networkType: 'LoRaWAN',
    ipAddress: '192.168.1.103',
    macAddress: 'CC:DD:EE:FF:00:03',
    status: 'attack',
    signalStrength: 72,
    latency: 150,
    lastHeartbeat: new Date(),
    position: { x: 120, y: 280 },
    connections: ['sc-001', 'sc-005'],
  },
  {
    id: 'sc-004',
    name: 'Street Light Array',
    type: 'Lighting Controller',
    manufacturer: 'LumiCity',
    model: 'SLA-300',
    firmwareVersion: '2.0.0',
    osVersion: 'RTOS',
    location: 'Main Street Sector',
    owner: 'Public Works',
    networkType: 'Zigbee',
    ipAddress: '192.168.1.104',
    macAddress: 'CC:DD:EE:FF:00:04',
    status: 'online',
    signalStrength: 95,
    latency: 10,
    lastHeartbeat: new Date(),
    position: { x: 480, y: 200 },
    connections: ['sc-002', 'sc-006'],
  },
  {
    id: 'sc-005',
    name: 'Waste Bin Sensor',
    type: 'Fill Level Sensor',
    manufacturer: 'WasteWatch',
    model: 'WBS-20',
    firmwareVersion: '1.2.0',
    osVersion: 'TinyOS',
    location: 'District 5',
    owner: 'Sanitation Dept',
    networkType: 'Sigfox',
    ipAddress: '192.168.1.105',
    macAddress: 'CC:DD:EE:FF:00:05',
    status: 'warning',
    signalStrength: 65,
    latency: 200,
    lastHeartbeat: new Date(Date.now() - 60000),
    position: { x: 250, y: 380 },
    connections: ['sc-003', 'sc-006'],
  },
  {
    id: 'sc-006',
    name: 'Water Quality Station',
    type: 'Water Sensor',
    manufacturer: 'AquaSense',
    model: 'WQS-100',
    firmwareVersion: '2.3.1',
    osVersion: 'Contiki',
    location: 'River Monitoring Point',
    owner: 'Water Authority',
    networkType: 'Cellular',
    ipAddress: '192.168.1.106',
    macAddress: 'CC:DD:EE:FF:00:06',
    status: 'online',
    signalStrength: 82,
    latency: 50,
    lastHeartbeat: new Date(),
    position: { x: 420, y: 350 },
    connections: ['sc-004', 'sc-005'],
  },
];

export const createDigitalTwins = (devices: PhysicalDevice[]): DigitalTwin[] => {
  return devices.map((device, index) => ({
    id: `twin-${device.id}`,
    physicalDeviceId: device.id,
    modelType: (['physics-based', 'data-driven', 'hybrid'] as const)[index % 3],
    modelVersion: `1.${index}.0`,
    lastSyncTime: new Date(),
    syncLatency: Math.floor(Math.random() * 50) + 10,
    normalBehaviorProfile: {
      cpuUsage: { min: 10, max: 60 },
      memoryUsage: { min: 20, max: 70 },
      networkTraffic: { min: 100, max: 5000 },
      temperature: { min: 25, max: 45 },
    },
    currentValues: {
      cpuUsage: Math.floor(Math.random() * 50) + 10,
      memoryUsage: Math.floor(Math.random() * 50) + 20,
      networkTraffic: Math.floor(Math.random() * 4000) + 500,
      temperature: Math.floor(Math.random() * 15) + 28,
    },
    historicalBaseline: {
      avgResponseTime: Math.floor(Math.random() * 100) + 50,
      avgPacketLoss: Math.random() * 2,
      avgUptime: 99.5 + Math.random() * 0.4,
    },
    contextInputs: ['Network topology', 'Historical patterns', 'Threat intelligence feeds'],
    driftIndicator: device.status === 'attack' ? 85 : device.status === 'warning' ? 45 : Math.random() * 15,
    status: device.status,
    position: { x: device.position.x + 50, y: device.position.y + 180 },
  }));
};

export const generateAlerts = (devices: PhysicalDevice[]): Alert[] => {
  const attackDevices = devices.filter(d => d.status === 'attack');
  const warningDevices = devices.filter(d => d.status === 'warning');
  
  const alerts: Alert[] = [];
  
  attackDevices.forEach((device, i) => {
    alerts.push({
      id: `alert-${i + 1}`,
      timestamp: new Date(Date.now() - Math.random() * 300000),
      severity: 'critical',
      type: 'DDoS Attack Detected',
      deviceId: device.id,
      twinId: `twin-${device.id}`,
      description: `Anomalous traffic pattern detected on ${device.name}. Traffic volume 500% above baseline.`,
      aiReasoning: 'Pattern analysis indicates distributed denial of service attack originating from multiple external IPs. Behavior deviation score: 92%. Confidence: High.',
      actionsTaken: ['Traffic isolated to quarantine VLAN', 'Backup systems activated', 'Incident reported to SOC'],
      resolved: false,
    });
  });
  
  warningDevices.forEach((device, i) => {
    alerts.push({
      id: `alert-warning-${i + 1}`,
      timestamp: new Date(Date.now() - Math.random() * 600000),
      severity: 'medium',
      type: 'Connection Anomaly',
      deviceId: device.id,
      description: `Intermittent connectivity issues detected on ${device.name}. Possible network degradation.`,
      aiReasoning: 'Latency spikes correlate with external network activity. Monitoring for escalation.',
      actionsTaken: ['Enhanced monitoring enabled', 'Network team notified'],
      resolved: false,
    });
  });
  
  return alerts;
};

export const generateMetrics = (devices: PhysicalDevice[], alerts: Alert[]): SystemMetrics => ({
  totalDevices: devices.length,
  totalTwins: devices.length,
  activeAlerts: alerts.filter(a => !a.resolved).length,
  avgSyncLatency: Math.floor(Math.random() * 30) + 20,
  mttd: Math.floor(Math.random() * 120) + 30,
  overallRiskScore: alerts.some(a => a.severity === 'critical') ? 75 : 25,
  incidentsTrend: Array.from({ length: 7 }, (_, i) => ({
    date: new Date(Date.now() - (6 - i) * 86400000),
    count: Math.floor(Math.random() * 10) + 1,
  })),
});
